<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Discover Your Male Archetype</title>

  <!-- Open Graph Metadata -->
  <meta property="og:title" id="og-title" content="Discover Your Male Archetype">
  <meta property="og:description" id="og-description" content="Take this quiz to explore 12 universal patterns of masculinity and find out which archetype you embody!">
  <meta property="og:image" id="og-image" content="https://archtype-grok.vercel.app/web-preview.png">
  <meta property="og:url" id="og-url" content="https://archtype-grok.vercel.app/">
  <meta property="og:type" content="website">

  <!-- Load p5.js library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>

  <!-- Script to dynamically update Open Graph tags -->
  <script>
    console.log("index.html loaded");

    // Dynamically update Open Graph tags based on URL query parameter
    (function() {
      const urlParams = new URLSearchParams(window.location.search);
      const archetype = urlParams.get('archetype');
      if (archetype) {
        console.log("Archetype detected in URL:", archetype);
        document.getElementById('og-title').setAttribute('content', `Iâ€™m a ${archetype}! Discover Your Archetype`);
        document.getElementById('og-description').setAttribute('content', `I got ${archetype} in the Male Archetype Quiz! Take the quiz to find out which archetype you are.`);

        // Map archetype to image URL (optional)
        const archetypeImageMap = {
          "King": "https://archtype-grok.vercel.app/king.png",
          "Father": "https://archtype-grok.vercel.app/father.png",
          "Warrior": "https://archtype-grok.vercel.app/warrior.png",
          "Magician": "https://archtype-grok.vercel.app/magician.png",
          "Lover": "https://archtype-grok.vercel.app/lover.png",
          "Sage": "https://archtype-grok.vercel.app/sage.png",
          "Explorer": "https://archtype-grok.vercel.app/explorer.png",
          "Creator": "https://archtype-grok.vercel.app/creator.png",
          "Hero": "https://archtype-grok.vercel.app/hero.png",
          "Rebel": "https://archtype-grok.vercel.app/rebel.png",
          "Jester": "https://archtype-grok.vercel.app/jester.png",
          "Caregiver": "https://archtype-grok.vercel.app/caregiver.png"
        };

        // Use the archetype-specific image if available, otherwise fall back to default
        const imageUrl = archetypeImageMap[archetype] || "https://archtype-grok.vercel.app/web-preview.png";
        document.getElementById('og-image').setAttribute('content', imageUrl);
        document.getElementById('og-url').setAttribute('content', window.location.href);

        console.log("Updated OG tags:", {
          title: document.getElementById('og-title').getAttribute('content'),
          description: document.getElementById('og-description').getAttribute('content'),
          image: document.getElementById('og-image').getAttribute('content'),
          url: document.getElementById('og-url').getAttribute('content')
        });
      } else {
        console.log("No archetype in URL, using default metadata");
      }
    })();
  </script>
</head>
<body>
  <!-- Load the sketch.js file -->
  <script src="sketch.js"></script>
</body>
</html>
